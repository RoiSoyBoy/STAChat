(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3548:function(e,t,s){Promise.resolve().then(s.bind(s,1540))},1540:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(3827),r=s(4090),l=s(8066);function i(e){let{title:t,children:s}=e;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"overflow-hidden rounded-xl bg-white shadow-sm transition-shadow hover:shadow-md",children:[(0,a.jsx)("div",{className:"border-b border-gray-100 px-6 py-4",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:t})}),(0,a.jsx)("div",{className:"p-6",children:s})]})}var n=s(3859),c=s(8745),o=s(8879),d=s(8621),x=s(1204);function m(e){let{onFilesAdded:t,onFileRemove:s,files:i}=e,[m,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h(!0)},[]);let{getRootProps:u,getInputProps:p,isDragActive:g}=(0,n.uI)({accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"]},maxSize:10485760,onDrop:e=>{t(e.map(e=>({name:e.name,size:"".concat((e.size/1048576).toFixed(1),"MB")})))}});return m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{...u(),children:(0,a.jsxs)(l.E.div,{className:"cursor-pointer rounded-xl border-2 border-dashed p-8 text-center transition-colors ".concat(g?"border-blue-400 bg-blue-50":"border-gray-200 hover:border-blue-400 hover:bg-gray-50"),whileHover:{scale:1.01},whileTap:{scale:.99},children:[(0,a.jsx)("input",{...p()}),(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:g?"שחרר את הקבצים כאן":"גרור קבצים לכאן או לחץ לבחירת קבצים"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"PDF, DOCX, או TXT עד 10MB"})]})}),(0,a.jsx)(c.M,{children:m&&i.map((e,t)=>(0,a.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-gray-100 bg-gray-50 px-4 py-3",children:[(0,a.jsx)("button",{onClick:()=>s(t),className:"rounded-full p-1 text-gray-400 transition-colors hover:bg-white hover:text-red-500",type:"button",children:(0,a.jsx)(d.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-right",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-700",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.size})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-gray-400"})]})]})},"".concat(e.name,"-").concat(t)))})]}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"rounded-xl border-2 border-dashed border-gray-200 p-8 text-center",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"טוען..."})]})})}var h=s(1759);let u=(0,r.createContext)({primaryColor:"#3B82F6",setPrimaryColor:()=>{}}),p=()=>(0,r.useContext)(u);function g(){let{primaryColor:e,setPrimaryColor:t}=p(),[s,n]=(0,r.useState)(e),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(""),[u,g]=(0,r.useState)("שלום! איך אני יכול/ה לעזור לך היום?"),[y,b]=(0,r.useState)(""),[f,j]=(0,r.useState)([]),[v,N]=(0,r.useState)([]),[w,C]=(0,r.useState)(!0),[S,k]=(0,r.useState)("idle");(0,r.useEffect)(()=>{!async function(){C(!0);try{let e=await fetch("/api/settings"),s=await e.json();n(s.primaryColor),g(s.greeting),x(s.logoUrl||""),t(s.primaryColor)}catch(e){}finally{C(!1)}}()},[t]);let E=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){o(s);let e=new FormData;e.append("file",s);let t=await fetch("/api/upload",{method:"POST",body:e}),a=await t.json();a.success&&a.filename&&x("".concat(window.location.origin,"/uploads/").concat(a.filename))}},F=e=>{j(t=>t.filter((t,s)=>s!==e))},O=e=>{try{return new URL(e),!0}catch(e){return!1}},P=async()=>{k("idle");try{(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({primaryColor:s,greeting:u,logoUrl:d})})).ok?(t(s),k("success")):k("error")}catch(e){k("error")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50/50 p-6 lg:p-8",dir:"rtl",children:(0,a.jsxs)("div",{className:"mx-auto max-w-5xl space-y-6",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"ניהול הצ'אטבוט"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"התאם את הצ'אטבוט לצרכי העסק שלך"})]}),w?(0,a.jsx)("div",{className:"text-center text-gray-500",children:"טוען הגדרות..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{title:"הגדרות כלליות",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"צבע ראשי"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"color",value:s,onChange:e=>{let s=e.target.value;n(s),t(s)},className:"h-10 w-20 cursor-pointer rounded-lg border border-gray-200"}),(0,a.jsx)("input",{type:"text",value:s.toUpperCase(),onChange:e=>n(e.target.value),className:"flex-1 rounded-lg border border-gray-200 px-3 text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"לוגו (אופציונלי)"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:E,className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm file:mr-4 file:rounded-lg file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"}),d&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("img",{src:d,alt:"Logo Preview",className:"h-10 w-10 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"תצוגה מקדימה"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"הודעת פתיחה"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-right text-sm"})]})]})}),(0,a.jsx)(i,{title:"נתוני אימון",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(m,{files:v,onFilesAdded:e=>N(t=>[...t,...e]),onFileRemove:e=>N(t=>t.filter((t,s)=>s!==e))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"הוסף כתובת URL לאתר"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y.trim()&&O(y)&&(j(e=>[...e,y]),b(""))},className:"flex gap-2",children:[(0,a.jsx)("input",{type:"url",placeholder:"https://example.com",value:y,onChange:e=>b(e.target.value),className:"flex-1 rounded-lg border border-gray-200 px-3 py-2 text-right text-sm"}),(0,a.jsxs)("button",{type:"submit",disabled:!y.trim()||!O(y),className:"flex items-center gap-2 rounded-lg bg-blue-50 px-4 py-2 text-sm font-medium text-blue-700 transition-colors hover:bg-blue-100 disabled:opacity-50",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),"הוסף"]})]})]}),f.length>0&&(0,a.jsx)("div",{className:"rounded-lg border border-gray-100",children:f.map((e,t)=>(0,a.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center justify-between border-b border-gray-100 px-4 py-3 last:border-0",children:[(0,a.jsx)("button",{onClick:()=>F(t),className:"text-sm text-red-500 hover:text-red-600",children:"הסר"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"URL"})]})]},e))})]})}),(0,a.jsx)(l.E.div,{className:"flex justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:(0,a.jsx)("button",{onClick:P,className:"rounded-full bg-blue-600 px-8 py-3 text-lg font-semibold text-white shadow-lg shadow-blue-600/10 transition-all hover:bg-blue-700 hover:shadow-blue-600/20 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",children:"שמור שינויים"})}),"success"===S&&(0,a.jsx)("div",{className:"text-center text-green-600 mt-2",children:"הגדרות נשמרו בהצלחה!"}),"error"===S&&(0,a.jsx)("div",{className:"text-center text-red-600 mt-2",children:"שגיאה בשמירת ההגדרות"})]})]})})}}},function(e){e.O(0,[511,887,971,69,744],function(){return e(e.s=3548)}),_N_E=e.O()}]);