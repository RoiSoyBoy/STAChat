(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{9130:function(e,t,a){Promise.resolve().then(a.bind(a,1189))},1189:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(3827),n=a(4090),s=a(8066),i=a(8745);let o=n.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}),l=n.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}),c=n.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),d=n.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}),u=n.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});function h(e){let{primaryColor:t,greeting:a,logoUrl:h}=e,[m,x]=(0,n.useState)(a?[{id:"greeting",text:a,isUser:!1}]:[]),[g,f]=(0,n.useState)(""),[w,p]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[j,v]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),E=(0,n.useRef)(null),C={header:{backgroundColor:t,color:"white",transition:"background-color 0.2s ease"},sendButton:{backgroundColor:!g.trim()||w?"#D1D5DB":k?L(t,-10):t,transition:"background-color 0.2s ease"},userMessage:{backgroundColor:t,color:"white",transition:"background-color 0.2s ease"},launcherButton:{backgroundColor:t,transition:"all 0.2s ease"}};function L(e,t){let a=parseInt(e.replace("#",""),16);return"#".concat((Math.min(255,Math.max(0,(a>>16)+t))<<16|Math.min(255,Math.max(0,(a>>8&255)+t))<<8|Math.min(255,Math.max(0,(255&a)+t))).toString(16).padStart(6,"0"))}let S=()=>{var e;null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{S()},[m]);let M=async e=>{if(e.preventDefault(),!g.trim()||w)return;let t={id:Date.now().toString(),text:g.trim(),isUser:!0};x(e=>[...e,t]),f(""),p(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t.text,clientId:"test-client"})});if(!e.ok)throw Error("Failed to get response");let a=await e.json(),r={id:(Date.now()+1).toString(),text:a.response,isUser:!1};x(e=>[...e,r])}catch(e){console.error("Error sending message:",e),x(e=>[...e,{id:(Date.now()+1).toString(),text:"לצערי על זה אני לא יכול לענות, פנה לנציג אנושי",isUser:!1}])}finally{p(!1)}};return(0,r.jsxs)(r.Fragment,{children:[!j&&(0,r.jsx)(s.E.button,{initial:{scale:0,opacity:0,y:0},animate:{scale:1,opacity:1,y:[0,-8,0],transition:{y:{repeat:1/0,duration:2,ease:"easeInOut"}}},exit:{scale:0,opacity:0},whileHover:{scale:1.05,backgroundColor:L(t,-10),y:0},onClick:()=>v(!0),className:"fixed bottom-4 right-4 z-50 flex h-[60px] w-[60px] items-center justify-center rounded-full text-white shadow-lg transition-all hover:shadow-xl",style:C.launcherButton,children:(0,r.jsx)(o,{className:"h-7 w-7"})}),j&&(0,r.jsxs)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-4 right-4 flex w-96 flex-col overflow-hidden rounded-2xl bg-white shadow-2xl",dir:"rtl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3",style:C.header,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[h?(0,r.jsx)("img",{src:h,alt:"Logo",className:"h-8 w-8 rounded bg-white object-contain"}):(0,r.jsx)(l,{className:"h-6 w-6 text-white"}),(0,r.jsx)("h2",{className:"font-semibold text-white",children:"Test Chatbot"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>{x([])},className:"rounded-full p-1.5 text-white/70 transition-colors hover:bg-white/10 hover:text-white",title:"נקה צ'אט",children:(0,r.jsx)(c,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>v(!1),className:"rounded-full p-1.5 text-white/70 transition-colors hover:bg-white/10 hover:text-white",title:"סגור",children:(0,r.jsx)(d,{className:"h-5 w-5"})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 overflow-y-auto p-4",style:{height:"400px"},children:[(0,r.jsxs)(i.M,{children:[m.map(e=>{var t;return(0,r.jsx)(s.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex ".concat(e.isUser?"justify-start":"justify-end"),dir:"rtl",children:(0,r.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 ".concat(e.isUser?"":"bg-gray-100 text-gray-900"),style:e.isUser?C.userMessage:void 0,dir:"rtl",children:[e.text,!e.isUser&&(t=e.text,["I don't know","I am not sure","לא יודע","לא ידוע","אין לי מידע","I do not know","Sorry, I do not know","מצטער","I am unable to answer","I cannot answer","אין לי תשובה","אין לי אפשרות","אין לי מספיק מידע"].some(e=>t.toLowerCase().includes(e.toLowerCase())))&&(0,r.jsx)("div",{className:"mt-2 flex justify-end",children:(0,r.jsx)("button",{className:"rounded bg-blue-500 px-3 py-1 text-xs text-white hover:bg-blue-600 disabled:opacity-50",disabled:!0,onClick:()=>alert("A human will contact you soon!"),children:"פנה לנציג אנושי"})})]})},e.id)}),w&&(0,r.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-end",children:(0,r.jsxs)("div",{className:"flex gap-1 rounded-2xl bg-gray-100 px-4 py-2",children:[(0,r.jsx)("span",{className:"animate-bounce",children:"•"}),(0,r.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"•"}),(0,r.jsx)("span",{className:"animate-bounce",style:{animationDelay:"0.4s"},children:"•"})]})})]}),(0,r.jsx)("div",{ref:E})]}),(0,r.jsx)("form",{onSubmit:M,className:"border-t border-gray-100 bg-white p-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"הקלד הודעה...",className:"flex-1 rounded-lg border border-gray-200 px-4 py-2 text-right focus:border-blue-500 focus:outline-none",dir:"rtl"}),(0,r.jsx)("button",{type:"submit",disabled:!g.trim()||w,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),className:"rounded-lg px-4 py-2 text-white transition-colors disabled:cursor-not-allowed",style:C.sendButton,children:(0,r.jsx)(u,{className:"h-5 w-5"})})]})})]})]})}function m(){let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async function(){s(!0);try{let e=await fetch("/api/settings"),a=await e.json();t({primaryColor:a.primaryColor,greeting:a.greeting,logoUrl:a.logoUrl})}finally{s(!1)}})()},[]),a||!e)?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center text-gray-500",children:"טוען הגדרות..."}):(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-100 p-8",children:[(0,r.jsx)("h1",{className:"mb-8 text-3xl font-bold text-gray-900",children:"Test Chat Widget"}),(0,r.jsxs)("p",{className:"mb-4 text-center text-gray-600",children:["This is a test page to demonstrate the chat widget functionality.",(0,r.jsx)("br",{}),"Try sending a message to interact with the chatbot!"]}),(0,r.jsx)(h,{primaryColor:e.primaryColor,greeting:e.greeting,logoUrl:e.logoUrl})]})}}},function(e){e.O(0,[511,971,69,744],function(){return e(e.s=9130)}),_N_E=e.O()}]);